#!/usr/bin/env bash
# Usage: ws-move next|prev
set -euo pipefail

DIR="${1:-next}"

# Current workspace (global id like 10/11/12/20/21/22...)
CUR=$(hyprctl activeworkspace -j | jq -r '.id')
BASE=$(( (CUR/10)*10 ))  # 10, 20, 30, 40, ...

if [[ "$DIR" == "next" ]]; then
  OFFSET=$(( (CUR - BASE + 1) % 3 ))
elif [[ "$DIR" == "prev" ]]; then
  OFFSET=$(( (CUR - BASE + 2) % 3 ))
else
  echo "usage: ws-move next|prev" >&2
  exit 2
fi

TARGET=$(( BASE + OFFSET ))

# Move active window without changing focus/workspace
hyprctl dispatch movetoworkspacesilent "$TARGET"
